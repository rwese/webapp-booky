{"id":"webapp-booky-04a","title":"Investigate and fix ratings import failure","description":"# Ratings Not Importing from booknotes-export\n\n## Problem\nThe import fails to import ratings from ~/Downloads/booknotes-export. Out of 177 books, 156 have ratings in the export file, but they are not being imported correctly.\n\n## Validation Results\n- Export file: ~/Downloads/booknotes-export/metadata.json\n- Total books: 177\n- Books with ratings: 156\n- Rating distribution: {1: 3, 3: 25, 4: 79, 5: 49}\n\n## Expected Behavior\nAll ratings (1, 3, 4, 5) should be imported and associated with their respective books.\n\n## Investigation Steps\n1. Check if the rating field in ImportBookData is being correctly mapped from the export\n2. Verify the getRatingFromImport function finds the rating field\n3. Check if ratings are being rejected by validation (0.5 increment check)\n4. Verify the import flow in importService.ts is calling createRatingFromImport\n5. Check if ratings are being upserted to the database correctly\n\n## Files to Examine\n- src/lib/importUtils.ts - getRatingFromImport, createRatingFromImport\n- src/lib/importService.ts - importSingleBook, importSingleBookWithCover\n- src/types/index.ts - ImportBookData interface","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:04:06.290076+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:16:31.6689+01:00","closed_at":"2026-01-18T11:16:31.6689+01:00","close_reason":"Fixed! The issue was that the BookDetail page wasn't loading existing ratings. Added useRating hook to load ratings when viewing book details."}
{"id":"webapp-booky-0br","title":"Fix cover image edit view layout and styling","description":"The cover image edit view does not look right - there are layout and styling issues.\\n\\n## Expected Behavior\\n- The cover image edit view should have a clean, intuitive layout\\n- All controls should be accessible and properly positioned\\n- The view should be responsive and work well on mobile and desktop\\n\\n## Actual Behavior\\n- The cover image edit view does not look right\\n- There may be overlapping elements, incorrect spacing, or visual issues\\n\\n## Areas to Check\\n- Container layout and padding\\n- Button positioning and sizing\\n- Modal/dialog appearance\\n- Mobile responsiveness\\n- Dark mode compatibility\\n- Accessibility (contrast, focus states)\\n\\n## Files Affected\\n- src/components/image/CoverUpload.tsx\\n- src/components/image/ImageCropper.tsx\\n- src/components/forms/BookForm.tsx (if cover is used there)\\n\\n## Testing\\n- Test on both mobile and desktop\\n- Test with light and dark modes\\n- Verify all interactive elements are accessible\\n- Check for proper spacing and alignment","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:45.537482+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:39:03.376166+01:00","closed_at":"2026-01-18T09:39:03.376166+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webapp-booky-0br","depends_on_id":"webapp-booky-k77","type":"blocks","created_at":"2026-01-18T09:05:45.542268+01:00","created_by":"René Weselowski"}]}
{"id":"webapp-booky-1bz","title":"Impact","description":"- **User Data Loss**: Users lose their carefully curated ratings and reviews","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.951859+01:00","updated_at":"2026-01-18T09:04:16.531398+01:00","closed_at":"2026-01-18T09:04:16.531398+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-1ho","title":"\"Barcode","description":"\"##","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:03.498624+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.734124+01:00","closed_at":"2026-01-18T13:01:27.734124+01:00","close_reason":"Closed"}
{"id":"webapp-booky-2nh","title":"Actual Behavior","description":"- Ratings are silently dropped during import (function returns null)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.951389+01:00","updated_at":"2026-01-18T09:04:16.526955+01:00","closed_at":"2026-01-18T09:04:16.526955+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-38u","title":"Investigate ratings import issue","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:03:51.582042+01:00","updated_at":"2026-01-18T11:25:17.196728+01:00","closed_at":"2026-01-18T11:25:17.196728+01:00","close_reason":"Investigation completed as part of webapp-booky-rda fix. Ratings were importing correctly, BookDetail just wasn't displaying them."}
{"id":"webapp-booky-3pm","title":"Suggested Fixes","description":"1. Accept rating = 0 as valid (represents unrated)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.725073+01:00","updated_at":"2026-01-18T09:05:42.972464+01:00","closed_at":"2026-01-18T09:05:42.972464+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-5cc","title":"Root Cause Analysis","description":"After reviewing the import code in `src/lib/importUtils.ts` and `src/lib/importService.ts`, I've identified several potential issues:","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.949429+01:00","updated_at":"2026-01-18T09:04:16.520189+01:00","closed_at":"2026-01-18T09:04:16.520189+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-6am","title":"\"ISBN","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:40.781095+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.644609+01:00","closed_at":"2026-01-18T13:01:27.644609+01:00","close_reason":"Closed"}
{"id":"webapp-booky-6ba","title":"Refactor Tag Display: Move to Filter Panel with Search","description":"# Refactor Tag Display: Move to Filter Panel with Search\n\n## Problem Statement\n\nCurrently, tags are displayed in a dedicated section on the Library page (separate from the filters panel), causing several UX issues:\n\n1. **Visual clutter**: Tags are always visible and occupy significant screen space\n2. **Inconsistent UX**: Tags are the only filter criterion not in the filters panel\n3. **Scalability**: Users with many tags (50+) have a very long tag list that takes up too much vertical space\n4. **Limited discoverability**: No easy way to find and filter by less-used tags\n\n## User Requirements\n\n1. **Collapse tags into filters panel**: Tags should only be visible when the filters panel is expanded\n2. **Limit visible tags**: Show only the X most commonly used tags (suggested: 10-15)\n3. **Search functionality**: Add a search field to find and filter by any tag in the library\n4. **Clear interaction**: Users should be able to easily see which tags are currently active/selected\n\n## Current Implementation Analysis\n\n### Files Affected\n\n1. **`src/pages/Library.tsx`** (lines 221-262):\n   - Tags section currently displayed as standalone section\n   - Uses `TagListing` component with `maxTags`, `showSearch`, and `onTagClick` props\n   - Separate \"Clear filter\" button for active tag filters\n\n2. **`src/components/forms/TagListing.tsx`**:\n   - Reusable component for displaying tags\n   - Already has `maxTags`, `showSearch`, `searchQuery`, `onSearchChange` props\n   - Shows \"Showing X of Y tags\" message when `maxTags` is set\n   - Has click-to-filter functionality via `onTagClick`\n\n### Current Behavior\n\nTags are displayed in a dedicated section that can be collapsed, but:\n- It's separate from the format/status filters\n- Takes up significant vertical space\n- No limit on visible tags (or limit not enforced in filter context)\n- Search field always visible when section expanded\n\n## Proposed Solution\n\n### 1. Move Tag Section into Filters Panel\n\nThe tag filtering functionality should be moved into the existing `FiltersPanel` component, which is only rendered when `showFilters` is true.\n\n### 2. Update FiltersPanel Interface\n\nExtend `FiltersPanelProps` to include:\n- `activeTags`: Array of currently selected tag IDs\n- `onTagToggle`: Callback when a tag is clicked\n- `onClearTags`: Callback to clear all tag filters\n\n### 3. Create Filter-Specific Tag Component\n\nCreate a new `TagFilterList` component (or enhance existing `TagListing`) with:\n- Maximum display limit (e.g., 12 most common tags)\n- Search functionality with debouncing\n- Clear visual indication of selected tags\n- \"Show more\" button to expand beyond the limit\n- Optimized for filter panel layout (smaller, more compact)\n\n### 4. UI/UX Requirements\n\n**Layout Requirements**:\n- Tags should be compact (smaller padding, font size)\n- Selected tags should have distinct visual state (e.g., primary color background)\n- Search field should be inline or collapsible\n- \"X tags selected\" indicator with clear all option\n\n**Interaction Requirements**:\n- Click tag → Toggle filter on/off\n- Visual feedback when tag is selected\n- Clear button appears when any tags are selected\n- Search results update in real-time\n\n**Accessibility**:\n- Keyboard navigation through tag list\n- ARIA attributes for selected state\n- Screen reader announces tag selection changes\n\n## Technical Implementation Plan\n\n### Phase 1: Refactor FiltersPanel\n\n1. Extend `FiltersPanelProps` to include tag-related props\n2. Add tag filtering section to `FiltersPanel` component\n3. Pass tag state from `LibraryPage` to `FiltersPanel`\n\n### Phase 2: Create TagFilterList Component\n\n1. Create new `TagFilterList.tsx` component optimized for filter usage\n2. Implement tag search with debouncing\n3. Show most common tags by default\n4. Implement \"show more\" functionality for less common tags\n5. Add visual indicators for selected tags\n\n### Phase 3: Update LibraryPage\n\n1. Remove standalone tags section\n2. Wire up tag state management in filters panel\n3. Update clear filters logic to include tags\n\n### Phase 4: Testing \u0026 Polish\n\n1. Test with large tag sets (50+ tags)\n2. Verify accessibility compliance\n3. Test keyboard navigation\n4. Verify responsive behavior on mobile\n\n## Success Criteria\n\n- [ ] Tags are only visible when filters panel is expanded\n- [ ] Only top 12 most common tags shown by default\n- [ ] Search field allows finding any tag in the library\n- [ ] Selected tags have clear visual indication\n- [ ] Clear filter button works for tags\n- [ ] No regression in existing filter functionality\n- [ ] Mobile layout remains usable with many tags\n\n## Technical Notes\n\n### Database Queries\n\nThe `tagOperations.getAllWithCount()` already exists and returns tags sorted by book count. This can be leveraged to get \"most common tags\" efficiently.\n\n### State Management\n\nCurrent tag filtering state:\n```typescript\n// In useLibraryStore or local state\nfilterConfig: {\n  tags?: string[]; // Array of tag IDs\n  // ...other filters\n}\n```\n\n### Component Structure\n\n```\nFiltersPanel\n├── Format Filter (existing)\n├── Sort Select (existing)\n├── Tag Filter (NEW)\n│   ├── Search Input\n│   ├── Common Tags List\n│   │   └── TagFilterItem × N\n│   └── Show More / Search Results\n└── Clear Filters Button\n```\n\n## Implementation Effort\n\n**Estimate**: 4-6 hours\n\n**Breakdown**:\n- FiltersPanel refactor: 1 hour\n- TagFilterList component: 2-3 hours\n- LibraryPage integration: 1 hour\n- Testing and polish: 1 hour\n\n## Dependencies\n\n- None (all required functionality already exists in codebase)\n\n## Related Files\n\n- `src/pages/Library.tsx`\n- `src/components/forms/TagListing.tsx`\n- `src/lib/db.ts` (tagOperations)\n- `src/types/index.ts` (FilterConfig type)\n- `src/store/useStore.ts` (useLibraryStore)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:52:42.251188+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T12:12:25.747261+01:00","closed_at":"2026-01-18T12:12:25.747261+01:00","close_reason":"Tag display refactored to use FiltersPanel with search and compact tag list"}
{"id":"webapp-booky-6en","title":"Investigate and fix ratings import failure","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:04:01.026878+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:04:16.291197+01:00","closed_at":"2026-01-18T11:04:16.291197+01:00","close_reason":"Duplicate of webapp-booky-04a which has better description"}
{"id":"webapp-booky-6xj","title":"Test Coverage","description":"The existing tests in `importUtils.test.ts` cover:","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.953363+01:00","updated_at":"2026-01-18T09:04:16.538771+01:00","closed_at":"2026-01-18T09:04:16.538771+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-7c7","title":"Expected Behavior","description":"- All ratings from the source export should be correctly imported","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.950838+01:00","updated_at":"2026-01-18T09:04:16.523368+01:00","closed_at":"2026-01-18T09:04:16.523368+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-7kx","title":"\"Barcode","description":"\"When","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:17:23.774853+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:07.194744+01:00","closed_at":"2026-01-18T21:44:07.194746+01:00"}
{"id":"webapp-booky-8bb","title":"Fix cropping functionality for cover images","description":"The cropping functionality for cover images is not working correctly.\\n\\n## Expected Behavior\\n- Users should be able to crop cover images to the 6:9 aspect ratio\\n- The crop should apply correctly and produce the expected output\\n\\n## Actual Behavior\\n- Cropping does not work as expected\\n- The crop area may not match the output, or the crop operation fails\\n\\n## Steps to Reproduce\\n1. Go to Add Book or Edit Book page\\n2. Upload a cover image that needs cropping\\n3. Try to crop the image\\n4. Observe issues with the crop operation\\n\\n## Possible Causes\\n- The crop coordinates transformation logic in ImageCropper.tsx may have issues\\n- The aspect ratio constraint may not be applied correctly\\n- The crop completion callback may not process the crop correctly\\n\\n## Files Affected\\n- src/components/image/ImageCropper.tsx\\n- src/components/image/CoverUpload.tsx\\n- src/lib/coverImageUtils.ts\\n\\n## Testing\\n- Verify crop area visually matches the output\\n- Test with images of various sizes and aspect ratios\\n- Test with rotation enabled","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:39.97364+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:28:45.443928+01:00","closed_at":"2026-01-18T09:28:45.443928+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webapp-booky-8bb","depends_on_id":"webapp-booky-k77","type":"blocks","created_at":"2026-01-18T09:05:39.975129+01:00","created_by":"René Weselowski"}]}
{"id":"webapp-booky-9f7","title":"\"Simple","description":"\"Test","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:45.267933+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.146208+01:00","closed_at":"2026-01-18T13:01:27.146208+01:00","close_reason":"Closed"}
{"id":"webapp-booky-9qv","title":"\"Fix","description":"\"GitHub","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T14:39:23.708558+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:31:25.67454+01:00","closed_at":"2026-01-18T21:31:25.674548+01:00"}
{"id":"webapp-booky-9v9","title":"Priority","description":"**High (Priority 1)**: This is a data integrity issue affecting user data during migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.953834+01:00","updated_at":"2026-01-18T09:04:16.541454+01:00","closed_at":"2026-01-18T09:04:16.541454+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-ajm","title":"\"Bug:","description":"\"##","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T13:00:08.692775+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:20.789563+01:00","closed_at":"2026-01-18T13:01:20.789563+01:00","close_reason":"Closed"}
{"id":"webapp-booky-bey","title":"Barcode scan does not auto-lookup ISBN","description":"After scanning an ISBN barcode, the application does NOT automatically perform the ISBN lookup. Users must manually click the Lookup button.\n\nExpected: Scan -\u003e Auto lookup -\u003e Show results\nCurrent: Scan -\u003e Pre-fill ISBN -\u003e No lookup -\u003e User must click button\n\nRoot Cause: In AddBook.tsx, the barcode:scanned event handler sets state but does not call handleIsbnLookup().","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:54.804024+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:06:00.38652+01:00","closed_at":"2026-01-18T13:06:00.38652+01:00","close_reason":"Closed"}
{"id":"webapp-booky-cmd","title":"Files Involved","description":"- `src/lib/importUtils.ts` - Contains `createRatingFromImport` and `transformImportBook` functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.952808+01:00","updated_at":"2026-01-18T09:04:16.536518+01:00","closed_at":"2026-01-18T09:04:16.536518+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-crq","title":"Problem Statement","description":"Ratings (and their associated reviews) are not being correctly imported when importing books from the booknotes-export format. Users report that their existing ratings and reviews are lost during the import process.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.945054+01:00","updated_at":"2026-01-18T09:04:16.516153+01:00","closed_at":"2026-01-18T09:04:16.516153+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-dgy","title":"Suggested Fixes","description":"1. **Accept rating = 0**: Treat rating = 0 as valid (represents unrated)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.954281+01:00","updated_at":"2026-01-18T09:04:16.543842+01:00","closed_at":"2026-01-18T09:04:16.543842+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-e9z","title":"\"ISBN","description":"\"When","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:17:11.204412+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:05.46697+01:00","closed_at":"2026-01-18T21:44:05.466972+01:00"}
{"id":"webapp-booky-edy","title":"Create rating repair utility for existing imports","description":"## Create rating repair utility for existing imports\\n\\n### Context\\nUsers who already imported from booknotes-export may have lost their ratings. This utility will identify and repair missing ratings.\\n\\n### Features\\n1. Scan database for books that should have ratings (based on original export data)\\n2. Compare imported books with export data\\n3. Backfill missing ratings\\n4. Generate report of repairs made\\n\\n### Technical Approach\\n1. Load original export metadata.json\\n2. Query all imported books\\n3. Match by ID and compare rating values\\n4. Insert missing ratings via ratingOperations.upsert\\n5. Log results for auditing\\n\\n### Usage\\n\\\\\\\\n\\n### Output\\n- Number of books scanned\\n- Number of ratings repaired\\n- Any errors encountered","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-18T11:07:26.350822+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:25:26.872518+01:00","closed_at":"2026-01-18T11:25:26.872518+01:00","close_reason":"Not needed. Ratings were always importing correctly (stored in DB). The issue was display-only. Users just need to view their books - ratings will appear. No repair needed as data was preserved."}
{"id":"webapp-booky-ee3","title":"Suggested Investigation Steps","description":"1. **Check source export format**: Verify what field names are actually used for ratings in the booknotes-export JSON","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.952339+01:00","updated_at":"2026-01-18T09:04:16.534354+01:00","closed_at":"2026-01-18T09:04:16.534354+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-gc1","title":"Debug rating import failure","description":"## Debug rating import failure from booknotes-export\\n\\n### Context\\nImport from ~/Downloads/booknotes-export fails to import ratings. Export contains 156 books with valid ratings (1-5 scale), but ratings are not transferred during import.\\n\\n### Root Cause Analysis\\nNeed to identify exact failure point in the import pipeline:\\n1. Data parsing (readImportMetadata)\\n2. Transformation (transformImportBook)  \\n3. Rating extraction (createRatingFromImport)\\n4. Database storage (ratingOperations.upsert)\\n\\n### Investigation Steps\\n1. Add console logging to trace rating values through import pipeline\\n2. Test with actual export data from ~/Downloads/booknotes-export\\n3. Validate getRatingFromImport returns expected values\\n4. Check if transformed.rating is null/undefined after transformation\\n5. Verify ratingOperations.upsert is called and succeeds\\n\\n### Expected Outcome\\nIdentify specific line/condition causing rating loss","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:07:04.504328+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:24:46.194826+01:00","closed_at":"2026-01-18T11:24:46.194826+01:00","close_reason":"Debug completed. Root cause: BookDetail page not loading existing ratings. Fix already applied in commit 56321fd."}
{"id":"webapp-booky-hyb","title":"\"Add","description":"\"The","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T22:42:35.248396+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T22:53:01.499725+01:00","closed_at":"2026-01-18T22:53:01.499725+01:00","close_reason":"Invalid ticket - incomplete/truncated data"}
{"id":"webapp-booky-j7k","title":"Create rating repair utility for existing imports","description":"## Create rating repair utility for existing imports\\n\\n### Context\\nUsers who already imported from booknotes-export may have lost their ratings. This utility will identify and repair missing ratings.\\n\\n### Features\\n1. Scan database for books that should have ratings (based on original export data)\\n2. Compare imported books with export data\\n3. Backfill missing ratings\\n4. Generate report of repairs made\\n\\n### Technical Approach\\n1. Load original export metadata.json\\n2. Query all imported books\\n3. Match by ID and compare rating values\\n4. Insert missing ratings via ratingOperations.upsert\\n5. Log results for auditing\\n\\n### Usage\\n\\n\\n### Output\\n- Number of books scanned\\n- Number of ratings repaired\\n- Any errors encountered","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-18T11:07:20.463411+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:07:36.74099+01:00","closed_at":"2026-01-18T11:07:36.74099+01:00","close_reason":"Duplicate ticket, use webapp-booky-edy instead"}
{"id":"webapp-booky-k77","title":"Fix cover image aspect ratio in preview and edit view","description":"The preview and edit view for cover images is displaying at the wrong aspect ratio.\\n\\n## Expected Behavior\\n- Cover images should display at 6:9 (standard book cover ratio)\\n- The preview should match what the final cropped output will look like\\n\\n## Actual Behavior\\n- The preview and edit view does not show the correct 6:9 aspect ratio\\n- This is a regression from commit ea0402c which changed the aspect ratio to 6:9\\n\\n## Steps to Reproduce\\n1. Go to Add Book or Edit Book page\\n2. Upload a cover image\\n3. Observe the preview/crop area - it does not maintain 6:9 aspect ratio correctly\\n\\n## Files Affected\\n- src/components/image/CoverUpload.tsx\\n- src/components/image/ImageCropper.tsx\\n- src/components/camera/CameraCapture.tsx\\n\\n## References\\n- Commit: ea0402c \"Re-design book edit form with 6:9 cover image aspect ratio\"\\n- Issue: webapp-booky-cn6","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:28.890711+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:20:57.362453+01:00","closed_at":"2026-01-18T09:20:57.362453+01:00","close_reason":"Closed"}
{"id":"webapp-booky-mfm","title":"\"ISBN","description":"\"##","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:16:44.952083+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:04.380917+01:00","closed_at":"2026-01-18T21:44:04.380925+01:00"}
{"id":"webapp-booky-mr8","title":"Fix ratings import bug - ratings not imported correctly","description":"# Ratings Not Imported Correctly During Book Import\n\n## Summary\nRatings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.\n\n## Root Cause Analysis\n\n### Issue 1: Rating = 0 Rejected\nThe createRatingFromImport function in src/lib/importUtils.ts (lines 111-141) returns null when importBook.rating === 0 because 0 \u003c 0.5. If the source data uses 0 for unrated books instead of undefined, ratings are silently dropped.\n\n### Issue 2: Floating Point Precision Issues\nThe check Math.round(importBook.rating * 2) / 2 !== importBook.rating can fail due to floating point precision issues (e.g., 3.0000000001 != 3.0).\n\n### Issue 3: Missing Field Mapping\nCode only looks for the rating field. If source uses myRating, userRating, starRating, etc., they are ignored.\n\n### Issue 4: Rating Scale Mismatch\nIf source uses 1-10 scale, ratings greater than 5 fail validation and are dropped.\n\n## Impact\n- User data loss (ratings and reviews)\n- Loss of trust in import functionality\n- Incomplete migration from other applications\n\n## Files Involved\n- src/lib/importUtils.ts - createRatingFromImport, transformImportBook functions\n- src/lib/importService.ts - importSingleBook, importSingleBookWithCover functions\n- src/types/index.ts - ImportBookData interface definition\n\n## Suggested Fixes\n1. Accept rating = 0 as valid (represents unrated)\n2. Use tolerance-based comparison for 0.5 increment check\n3. Add support for multiple rating field names\n4. Add scale conversion (1-10 to 0.5-5)\n5. Add logging when ratings are skipped and the reason\n6. Add UI feedback for skipped ratings\n\n## Priority\nHigh (P1) - This is a data integrity issue affecting user data during migration.\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T09:05:46.22668+01:00","updated_at":"2026-01-18T09:49:17.02021+01:00","closed_at":"2026-01-18T09:49:17.02021+01:00","close_reason":"Closed"}
{"id":"webapp-booky-oo3","title":"Fix ratings import issue - ratings not imported correctly","description":"## Summary\\nRatings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.\\n\\n## Root Cause\\nThe  function in  (lines 111-141) has validation issues:\\n\\n1. **Rating = 0 rejected**: When , the function returns null because 0 \u003c 0.5. If source data uses 0 for unrated books instead of undefined, ratings are silently dropped.\\n\\n2. **Floating point precision**: The check  can fail due to floating point precision issues (e.g., 3.0000000001 != 3.0).\\n\\n3. **Missing field mapping**: Code only looks for  field. If source uses , , , etc., they are ignored.\\n\\n4. **Scale mismatch**: If source uses 1-10 scale, ratings \u003e 5 fail validation and are dropped.\\n\\n## Impact\\n- User data loss (ratings and reviews)\\n- Loss of trust in import functionality\\n- Incomplete migration from other applications\\n\\n## Files Involved\\n-  - , \\n-  - , \\n-  -  interface\\n\\n## Suggested Fixes\\n1. Accept rating = 0 as valid (represents unrated)\\n2. Use tolerance-based comparison for 0.5 increment check\\n3. Add support for multiple rating field names\\n4. Add scale conversion (1-10 to 0.5-5)\\n5. Add logging when ratings are skipped\\n6. Add UI feedback for skipped ratings","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T09:04:26.621764+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:05:22.304753+01:00","closed_at":"2026-01-18T09:05:22.304753+01:00","close_reason":"Recreating with better formatting"}
{"id":"webapp-booky-pnq","title":"Impact","description":"- User data loss (ratings and reviews)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.722994+01:00","updated_at":"2026-01-18T09:05:42.968965+01:00","closed_at":"2026-01-18T09:05:42.968965+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-psi","title":"Implement German language priority for ISBN metadata fetching","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T11:54:05.059038+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T12:19:04.569277+01:00","closed_at":"2026-01-18T12:19:04.569277+01:00","close_reason":"German language priority for ISBN metadata fetching implemented"}
{"id":"webapp-booky-qwd","title":"\"Add","description":"\"Create","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T22:42:36.787981+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T22:53:10.257881+01:00","closed_at":"2026-01-18T22:53:10.257881+01:00","close_reason":"Invalid ticket - incomplete/truncated data"}
{"id":"webapp-booky-rda","title":"Fix rating import bug","description":"## Fix rating import bug\\n\\n### Context\\nThis ticket depends on webapp-booky-gc1 (Debug rating import failure)\\n\\n### Problem\\nRatings from booknotes-export are not being imported to the application.\\n\\n### Root Cause\\n[TODO: Fill in after webapp-booky-gc1 investigation completes]\\n\\n### Fix Strategy\\n[TODO: Specify fix based on root cause]\\n\\n### Changes Required\\n- [ ] Fix identified issue in importUtils.ts or importService.ts\\n- [ ] Add unit tests for rating import scenarios\\n- [ ] Verify fix with actual export data","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:07:10.192387+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:24:54.573814+01:00","closed_at":"2026-01-18T11:24:54.573814+01:00","close_reason":"Fix applied in commit 56321fd. BookDetail.tsx now loads existing ratings using useRating hook. Ratings import correctly, they just weren't being displayed."}
{"id":"webapp-booky-u3i","title":"Root Cause Analysis","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.721845+01:00","updated_at":"2026-01-18T09:05:42.967+01:00","closed_at":"2026-01-18T09:05:42.967+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-umv","title":"Summary","description":"Ratings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.720991+01:00","updated_at":"2026-01-18T09:05:42.964792+01:00","closed_at":"2026-01-18T09:05:42.964792+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-uqp","title":"Add Analytics link to sidebar navigation menu","description":"The Analytics page exists at /analytics and is fully functional, but it cannot be accessed from the sidebar navigation menu.\n\n## Current State\n\n**Desktop Sidebar** (src/components/common/Navigation.tsx:62-66):\n- Has: Home, Library, Settings\n- Missing: Analytics link\n\n**Mobile Menu Overlay** (src/components/common/NavigationComponents.tsx:62-65):\n- Has: Analytics, Settings\n- Missing: Home and Library links\n\n## Expected Behavior\n\nUsers should be able to access the Analytics page from both the desktop sidebar and mobile menu overlay.\n\n## Impact\n\n- Users cannot navigate to Analytics from the sidebar (desktop)\n- Mobile users have incomplete navigation (missing Home and Library)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-19T00:13:10.498645+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T00:26:44.666996+01:00","closed_at":"2026-01-19T00:26:44.666996+01:00","close_reason":"Completed"}
{"id":"webapp-booky-vt2","title":"Priority","description":"High (P1) - This is a data integrity issue affecting user data during migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.726302+01:00","updated_at":"2026-01-18T09:05:42.973961+01:00","closed_at":"2026-01-18T09:05:42.973961+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-wfw","title":"Files Involved","description":"- src/lib/importUtils.ts - createRatingFromImport, transformImportBook functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.723916+01:00","updated_at":"2026-01-18T09:05:42.970661+01:00","closed_at":"2026-01-18T09:05:42.970661+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-yf2","title":"Move star rating to bottom-left corner on library book cards","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:51:34.662074+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:54:39.98086+01:00","closed_at":"2026-01-18T11:54:39.98086+01:00","close_reason":"Closed"}
