{"id":"webapp-booky-04a","title":"Investigate and fix ratings import failure","description":"# Ratings Not Importing from booknotes-export\n\n## Problem\nThe import fails to import ratings from ~/Downloads/booknotes-export. Out of 177 books, 156 have ratings in the export file, but they are not being imported correctly.\n\n## Validation Results\n- Export file: ~/Downloads/booknotes-export/metadata.json\n- Total books: 177\n- Books with ratings: 156\n- Rating distribution: {1: 3, 3: 25, 4: 79, 5: 49}\n\n## Expected Behavior\nAll ratings (1, 3, 4, 5) should be imported and associated with their respective books.\n\n## Investigation Steps\n1. Check if the rating field in ImportBookData is being correctly mapped from the export\n2. Verify the getRatingFromImport function finds the rating field\n3. Check if ratings are being rejected by validation (0.5 increment check)\n4. Verify the import flow in importService.ts is calling createRatingFromImport\n5. Check if ratings are being upserted to the database correctly\n\n## Files to Examine\n- src/lib/importUtils.ts - getRatingFromImport, createRatingFromImport\n- src/lib/importService.ts - importSingleBook, importSingleBookWithCover\n- src/types/index.ts - ImportBookData interface","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:04:06.290076+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:16:31.6689+01:00","closed_at":"2026-01-18T11:16:31.6689+01:00","close_reason":"Fixed! The issue was that the BookDetail page wasn't loading existing ratings. Added useRating hook to load ratings when viewing book details."}
{"id":"webapp-booky-0br","title":"Fix cover image edit view layout and styling","description":"The cover image edit view does not look right - there are layout and styling issues.\\n\\n## Expected Behavior\\n- The cover image edit view should have a clean, intuitive layout\\n- All controls should be accessible and properly positioned\\n- The view should be responsive and work well on mobile and desktop\\n\\n## Actual Behavior\\n- The cover image edit view does not look right\\n- There may be overlapping elements, incorrect spacing, or visual issues\\n\\n## Areas to Check\\n- Container layout and padding\\n- Button positioning and sizing\\n- Modal/dialog appearance\\n- Mobile responsiveness\\n- Dark mode compatibility\\n- Accessibility (contrast, focus states)\\n\\n## Files Affected\\n- src/components/image/CoverUpload.tsx\\n- src/components/image/ImageCropper.tsx\\n- src/components/forms/BookForm.tsx (if cover is used there)\\n\\n## Testing\\n- Test on both mobile and desktop\\n- Test with light and dark modes\\n- Verify all interactive elements are accessible\\n- Check for proper spacing and alignment","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:45.537482+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:39:03.376166+01:00","closed_at":"2026-01-18T09:39:03.376166+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webapp-booky-0br","depends_on_id":"webapp-booky-k77","type":"blocks","created_at":"2026-01-18T09:05:45.542268+01:00","created_by":"René Weselowski"}]}
{"id":"webapp-booky-0h0","title":"Fix Frontend-to-Backend Authentication Integration","description":"## Problem Summary\n\nThe frontend cannot authenticate with the backend due to multiple critical issues in the authentication implementation. Users cannot log in or register because the authentication system is not properly configured or connected.\n\n## Critical Issues Found\n\n### 1. **Missing AuthProvider Wrapper (CRITICAL)**\n- The `AuthProvider` from `src/contexts/AuthContext.tsx` is NOT wrapping the app\n- `main.tsx` only wraps with `BrowserRouter` and `ErrorBoundary`\n- This means `useAuth()` hooks will throw \"useAuth must be used within an AuthProvider\" errors\n\n### 2. **Missing Auth Route**\n- The SignInPage exists at `src/pages/auth/SignInPage.tsx` but is NOT included in the routes in `App.tsx`\n- Users cannot navigate to the login page at all\n\n### 3. **Duplicate Auth Implementations**\n- Two separate auth systems exist:\n  - `src/contexts/AuthContext.tsx` - Uses `authService` from `../lib/backendAuth`\n  - `src/hooks/useAuth.tsx` - Uses `authApi` from `../services/api`\n- These have conflicting implementations and both export `AuthProvider` and `useAuth`\n\n### 4. **Response Format Mismatch**\n- **Main backend** (`backend/src/routes/auth.ts`) returns: `{ success: boolean, user, accessToken, refreshToken, expiresIn }`\n- **Backend-lite** (`backend-lite/src/routes/auth.ts`) returns: `{ user, token }` (no success field, single token)\n- Frontend `backendAuth.ts` expects the main backend format but may connect to backend-lite\n\n### 5. **Missing Logout Endpoint**\n- Frontend `backendAuth.ts` calls `${BACKEND_API}/auth/logout`\n- Neither backend (`backend/` nor `backend-lite/`) has a `/auth/logout` endpoint\n\n### 6. **Token Storage Inconsistency**\n- `backendAuth.ts` stores: `booky_auth_tokens` and `booky_user`\n- `services/api.ts` stores: `auth_token` (different key)\n- This causes token inconsistencies across auth flows\n\n### 7. **Missing Refresh Token in Backend-lite**\n- Backend-lite doesn't have token refresh endpoint\n- Frontend `backendAuth.ts` tries to call `/auth/refresh` which doesn't exist in backend-lite\n\n## Required Fixes\n\n### Step 1: Add AuthProvider to App/Wrapper\n- Wrap entire app with `AuthProvider` from `src/contexts/AuthContext`\n- Add to `src/main.tsx` or create an `AppProviders` component\n\n### Step 2: Add Login Route to App.tsx\n- Import and add route for `/auth/signin` pointing to SignInPage\n- Add proper route protection (redirect to login if not authenticated)\n\n### Step 3: Consolidate Auth Implementations\n- Choose ONE auth implementation (recommend: `backendAuth.ts` + `AuthContext`)\n- Remove duplicate `useAuth` hook and `AuthProvider` from `src/hooks/useAuth.tsx`\n- Update SignInPage to use the single auth system\n\n### Step 4: Add Missing Backend Endpoints\n- Add `/auth/logout` endpoint to both backend and backend-lite\n- Ensure backend-lite has token refresh capability\n- Standardize response formats across backends\n\n### Step 5: Fix Token Storage\n- Consolidate to single token storage key\n- Update all auth code to use consistent storage\n\n## Acceptance Criteria\n\n- [ ] AuthProvider wraps the entire app\n- [ ] Login page is accessible at `/auth/signin`\n- [ ] Login and registration work correctly\n- [ ] Logout functionality works\n- [ ] Token refresh works correctly\n- [ ] Single, consistent auth implementation across codebase\n- [ ] Backend and frontend response formats match","status":"open","priority":1,"issue_type":"bug","owner":"wese@nope.at","created_at":"2026-01-19T06:56:16.494777+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:56:16.494777+01:00"}
{"id":"webapp-booky-1bz","title":"Impact","description":"- **User Data Loss**: Users lose their carefully curated ratings and reviews","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.951859+01:00","updated_at":"2026-01-18T09:04:16.531398+01:00","closed_at":"2026-01-18T09:04:16.531398+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-1ho","title":"\"Barcode","description":"\"##","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:03.498624+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.734124+01:00","closed_at":"2026-01-18T13:01:27.734124+01:00","close_reason":"Closed"}
{"id":"webapp-booky-2nh","title":"Actual Behavior","description":"- Ratings are silently dropped during import (function returns null)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.951389+01:00","updated_at":"2026-01-18T09:04:16.526955+01:00","closed_at":"2026-01-18T09:04:16.526955+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-38u","title":"Investigate ratings import issue","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:03:51.582042+01:00","updated_at":"2026-01-18T11:25:17.196728+01:00","closed_at":"2026-01-18T11:25:17.196728+01:00","close_reason":"Investigation completed as part of webapp-booky-rda fix. Ratings were importing correctly, BookDetail just wasn't displaying them."}
{"id":"webapp-booky-3h1","title":"PWA Enhancement - Advanced Offline Features","description":"Enhance PWA with advanced service worker features. Add background sync for offline mutations, implement push notifications for reading reminders, improve cache strategies for book covers and API responses, add offline queue management with conflict resolution.","status":"open","priority":2,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:08.828974+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:08.828974+01:00"}
{"id":"webapp-booky-3pm","title":"Suggested Fixes","description":"1. Accept rating = 0 as valid (represents unrated)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.725073+01:00","updated_at":"2026-01-18T09:05:42.972464+01:00","closed_at":"2026-01-18T09:05:42.972464+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-4co","title":"Backend-Lite: Add Missing Auth Endpoints","description":"Backend-lite is missing key auth endpoints that frontend requires.\n\n**Required Endpoints:**\n\n1. **POST /auth/logout**\n   - Returns: `{ success: true }`\n   - Clears any server-side session\n\n2. **POST /auth/refresh**\n   - Accepts: `{ refreshToken: string }`\n   - Returns: `{ success: true, accessToken, expiresIn }`\n\n**Response Format Standardization:**\n- Add `success: true` to all successful responses\n- Match main backend response structure for consistency\n\n**Acceptance Criteria:**\n- Backend-lite /auth/logout returns { success: true }\n- Backend-lite /auth/refresh returns { success: true, accessToken, expiresIn }\n- Response format matches main backend","status":"closed","priority":1,"issue_type":"bug","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T06:58:37.813479+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:05:14.930397+01:00","closed_at":"2026-01-19T07:05:14.930397+01:00","close_reason":"Completed"}
{"id":"webapp-booky-4qr","title":"Reading Goals and Streaks","description":"Add reading goals and streaks feature. Allow users to set annual reading targets (books and pages). Implement reading streak tracking with calendar heatmap. Add progress notifications and achievements. Include statistics dashboard for goal tracking.","status":"open","priority":3,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:13.178669+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:13.178669+01:00"}
{"id":"webapp-booky-4v3","title":"Expand Test Coverage - E2E Tests","description":"Add comprehensive E2E tests for critical user journeys including book cataloging workflow, barcode scanning flow, reading status updates, and analytics dashboard interactions. Cover happy paths and error scenarios with Playwright.","status":"open","priority":2,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T06:37:10.058604+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:10.058604+01:00"}
{"id":"webapp-booky-5cc","title":"Root Cause Analysis","description":"After reviewing the import code in `src/lib/importUtils.ts` and `src/lib/importService.ts`, I've identified several potential issues:","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.949429+01:00","updated_at":"2026-01-18T09:04:16.520189+01:00","closed_at":"2026-01-18T09:04:16.520189+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-6am","title":"\"ISBN","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:40.781095+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.644609+01:00","closed_at":"2026-01-18T13:01:27.644609+01:00","close_reason":"Closed"}
{"id":"webapp-booky-6ba","title":"Refactor Tag Display: Move to Filter Panel with Search","description":"# Refactor Tag Display: Move to Filter Panel with Search\n\n## Problem Statement\n\nCurrently, tags are displayed in a dedicated section on the Library page (separate from the filters panel), causing several UX issues:\n\n1. **Visual clutter**: Tags are always visible and occupy significant screen space\n2. **Inconsistent UX**: Tags are the only filter criterion not in the filters panel\n3. **Scalability**: Users with many tags (50+) have a very long tag list that takes up too much vertical space\n4. **Limited discoverability**: No easy way to find and filter by less-used tags\n\n## User Requirements\n\n1. **Collapse tags into filters panel**: Tags should only be visible when the filters panel is expanded\n2. **Limit visible tags**: Show only the X most commonly used tags (suggested: 10-15)\n3. **Search functionality**: Add a search field to find and filter by any tag in the library\n4. **Clear interaction**: Users should be able to easily see which tags are currently active/selected\n\n## Current Implementation Analysis\n\n### Files Affected\n\n1. **`src/pages/Library.tsx`** (lines 221-262):\n   - Tags section currently displayed as standalone section\n   - Uses `TagListing` component with `maxTags`, `showSearch`, and `onTagClick` props\n   - Separate \"Clear filter\" button for active tag filters\n\n2. **`src/components/forms/TagListing.tsx`**:\n   - Reusable component for displaying tags\n   - Already has `maxTags`, `showSearch`, `searchQuery`, `onSearchChange` props\n   - Shows \"Showing X of Y tags\" message when `maxTags` is set\n   - Has click-to-filter functionality via `onTagClick`\n\n### Current Behavior\n\nTags are displayed in a dedicated section that can be collapsed, but:\n- It's separate from the format/status filters\n- Takes up significant vertical space\n- No limit on visible tags (or limit not enforced in filter context)\n- Search field always visible when section expanded\n\n## Proposed Solution\n\n### 1. Move Tag Section into Filters Panel\n\nThe tag filtering functionality should be moved into the existing `FiltersPanel` component, which is only rendered when `showFilters` is true.\n\n### 2. Update FiltersPanel Interface\n\nExtend `FiltersPanelProps` to include:\n- `activeTags`: Array of currently selected tag IDs\n- `onTagToggle`: Callback when a tag is clicked\n- `onClearTags`: Callback to clear all tag filters\n\n### 3. Create Filter-Specific Tag Component\n\nCreate a new `TagFilterList` component (or enhance existing `TagListing`) with:\n- Maximum display limit (e.g., 12 most common tags)\n- Search functionality with debouncing\n- Clear visual indication of selected tags\n- \"Show more\" button to expand beyond the limit\n- Optimized for filter panel layout (smaller, more compact)\n\n### 4. UI/UX Requirements\n\n**Layout Requirements**:\n- Tags should be compact (smaller padding, font size)\n- Selected tags should have distinct visual state (e.g., primary color background)\n- Search field should be inline or collapsible\n- \"X tags selected\" indicator with clear all option\n\n**Interaction Requirements**:\n- Click tag → Toggle filter on/off\n- Visual feedback when tag is selected\n- Clear button appears when any tags are selected\n- Search results update in real-time\n\n**Accessibility**:\n- Keyboard navigation through tag list\n- ARIA attributes for selected state\n- Screen reader announces tag selection changes\n\n## Technical Implementation Plan\n\n### Phase 1: Refactor FiltersPanel\n\n1. Extend `FiltersPanelProps` to include tag-related props\n2. Add tag filtering section to `FiltersPanel` component\n3. Pass tag state from `LibraryPage` to `FiltersPanel`\n\n### Phase 2: Create TagFilterList Component\n\n1. Create new `TagFilterList.tsx` component optimized for filter usage\n2. Implement tag search with debouncing\n3. Show most common tags by default\n4. Implement \"show more\" functionality for less common tags\n5. Add visual indicators for selected tags\n\n### Phase 3: Update LibraryPage\n\n1. Remove standalone tags section\n2. Wire up tag state management in filters panel\n3. Update clear filters logic to include tags\n\n### Phase 4: Testing \u0026 Polish\n\n1. Test with large tag sets (50+ tags)\n2. Verify accessibility compliance\n3. Test keyboard navigation\n4. Verify responsive behavior on mobile\n\n## Success Criteria\n\n- [ ] Tags are only visible when filters panel is expanded\n- [ ] Only top 12 most common tags shown by default\n- [ ] Search field allows finding any tag in the library\n- [ ] Selected tags have clear visual indication\n- [ ] Clear filter button works for tags\n- [ ] No regression in existing filter functionality\n- [ ] Mobile layout remains usable with many tags\n\n## Technical Notes\n\n### Database Queries\n\nThe `tagOperations.getAllWithCount()` already exists and returns tags sorted by book count. This can be leveraged to get \"most common tags\" efficiently.\n\n### State Management\n\nCurrent tag filtering state:\n```typescript\n// In useLibraryStore or local state\nfilterConfig: {\n  tags?: string[]; // Array of tag IDs\n  // ...other filters\n}\n```\n\n### Component Structure\n\n```\nFiltersPanel\n├── Format Filter (existing)\n├── Sort Select (existing)\n├── Tag Filter (NEW)\n│   ├── Search Input\n│   ├── Common Tags List\n│   │   └── TagFilterItem × N\n│   └── Show More / Search Results\n└── Clear Filters Button\n```\n\n## Implementation Effort\n\n**Estimate**: 4-6 hours\n\n**Breakdown**:\n- FiltersPanel refactor: 1 hour\n- TagFilterList component: 2-3 hours\n- LibraryPage integration: 1 hour\n- Testing and polish: 1 hour\n\n## Dependencies\n\n- None (all required functionality already exists in codebase)\n\n## Related Files\n\n- `src/pages/Library.tsx`\n- `src/components/forms/TagListing.tsx`\n- `src/lib/db.ts` (tagOperations)\n- `src/types/index.ts` (FilterConfig type)\n- `src/store/useStore.ts` (useLibraryStore)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:52:42.251188+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T12:12:25.747261+01:00","closed_at":"2026-01-18T12:12:25.747261+01:00","close_reason":"Tag display refactored to use FiltersPanel with search and compact tag list"}
{"id":"webapp-booky-6en","title":"Investigate and fix ratings import failure","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:04:01.026878+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:04:16.291197+01:00","closed_at":"2026-01-18T11:04:16.291197+01:00","close_reason":"Duplicate of webapp-booky-04a which has better description"}
{"id":"webapp-booky-6xj","title":"Test Coverage","description":"The existing tests in `importUtils.test.ts` cover:","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.953363+01:00","updated_at":"2026-01-18T09:04:16.538771+01:00","closed_at":"2026-01-18T09:04:16.538771+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-7c7","title":"Expected Behavior","description":"- All ratings from the source export should be correctly imported","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.950838+01:00","updated_at":"2026-01-18T09:04:16.523368+01:00","closed_at":"2026-01-18T09:04:16.523368+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-7kx","title":"\"Barcode","description":"\"When","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:17:23.774853+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:07.194744+01:00","closed_at":"2026-01-18T21:44:07.194746+01:00"}
{"id":"webapp-booky-7mh","title":"Performance Optimization - React Rendering","description":"Implement React Compiler or manual memoization for expensive components. Add useMemo/useCallback to heavy computations, implement React.memo for list components, optimize re-renders in Library and Analytics pages. Target 40% reduction in unnecessary re-renders.","status":"open","priority":2,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T06:37:07.190274+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:07.190274+01:00"}
{"id":"webapp-booky-8bb","title":"Fix cropping functionality for cover images","description":"The cropping functionality for cover images is not working correctly.\\n\\n## Expected Behavior\\n- Users should be able to crop cover images to the 6:9 aspect ratio\\n- The crop should apply correctly and produce the expected output\\n\\n## Actual Behavior\\n- Cropping does not work as expected\\n- The crop area may not match the output, or the crop operation fails\\n\\n## Steps to Reproduce\\n1. Go to Add Book or Edit Book page\\n2. Upload a cover image that needs cropping\\n3. Try to crop the image\\n4. Observe issues with the crop operation\\n\\n## Possible Causes\\n- The crop coordinates transformation logic in ImageCropper.tsx may have issues\\n- The aspect ratio constraint may not be applied correctly\\n- The crop completion callback may not process the crop correctly\\n\\n## Files Affected\\n- src/components/image/ImageCropper.tsx\\n- src/components/image/CoverUpload.tsx\\n- src/lib/coverImageUtils.ts\\n\\n## Testing\\n- Verify crop area visually matches the output\\n- Test with images of various sizes and aspect ratios\\n- Test with rotation enabled","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:39.97364+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:28:45.443928+01:00","closed_at":"2026-01-18T09:28:45.443928+01:00","close_reason":"Closed","dependencies":[{"issue_id":"webapp-booky-8bb","depends_on_id":"webapp-booky-k77","type":"blocks","created_at":"2026-01-18T09:05:39.975129+01:00","created_by":"René Weselowski"}]}
{"id":"webapp-booky-94b","title":"Performance Monitoring System","description":"Add performance profiling and monitoring system. Implement custom performance metrics tracking, add slow query detection for IndexedDB operations, create performance dashboard with trends over time. Set up alerting for performance regressions. Integrate with existing error tracking.","status":"open","priority":4,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:16.49916+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:16.49916+01:00"}
{"id":"webapp-booky-96f","title":"Migrate to Backend-Lite - Audit \u0026 Feature Gap Analysis","description":"## Current State Analysis\n\n### Old Backend (`backend/`) - To Be Removed\n- **Routes**: auth.ts, files.ts\n- **Features**: OAuth/social, email service, file storage, cache, sync service, security middleware\n- **Infrastructure**: Docker, K8s, Prometheus, Grafana, nginx, monitoring\n- **Size**: ~442 files, complex production setup\n\n### Backend-Lite (`backend-lite/`) - Target\n- **Routes**: auth.ts, books.ts, collections.ts, ratings.ts, reading.ts, tags.ts\n- **Features**: Core book collection API, basic auth (recently updated with logout/refresh)\n- **Infrastructure**: Simple Express server, Prisma, SQLite\n- **Size**: ~14 TypeScript files\n\n## Missing Features to Migrate\n\n1. **File Upload Route** - Old backend has `/files` for cover image uploads\n2. **File Storage Service** - `fileStorage.ts` handles image uploads\n3. **Prisma Schema Alignment** - Ensure schemas are compatible\n\n## Tasks\n\n1. Audit backend-lite against frontend requirements\n2. Migrate missing features from old backend to backend-lite\n3. Remove old backend directory\n4. Update frontend to use backend-lite API URL\n5. Update documentation","status":"closed","priority":1,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T07:07:42.204589+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:08:33.347206+01:00","closed_at":"2026-01-19T07:08:33.347206+01:00","close_reason":"Duplicate - covered by webapp-booky-v9g"}
{"id":"webapp-booky-9f7","title":"\"Simple","description":"\"Test","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:45.267933+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:27.146208+01:00","closed_at":"2026-01-18T13:01:27.146208+01:00","close_reason":"Closed"}
{"id":"webapp-booky-9qv","title":"\"Fix","description":"\"GitHub","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T14:39:23.708558+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:31:25.67454+01:00","closed_at":"2026-01-18T21:31:25.674548+01:00"}
{"id":"webapp-booky-9rm","title":"Large Library Performance (10K+ Books)","description":"Optimize for large libraries (10,000+ books). Implement virtual scrolling for book lists, add pagination or infinite scroll for library view, optimize IndexedDB queries and indexes, implement lazy loading for book metadata, add performance benchmarks and stress testing.","status":"open","priority":4,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T06:37:17.842509+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:17.842509+01:00"}
{"id":"webapp-booky-9v9","title":"Priority","description":"**High (Priority 1)**: This is a data integrity issue affecting user data during migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.953834+01:00","updated_at":"2026-01-18T09:04:16.541454+01:00","closed_at":"2026-01-18T09:04:16.541454+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-ajm","title":"\"Bug:","description":"\"##","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T13:00:08.692775+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:01:20.789563+01:00","closed_at":"2026-01-18T13:01:20.789563+01:00","close_reason":"Closed"}
{"id":"webapp-booky-bey","title":"Barcode scan does not auto-lookup ISBN","description":"After scanning an ISBN barcode, the application does NOT automatically perform the ISBN lookup. Users must manually click the Lookup button.\n\nExpected: Scan -\u003e Auto lookup -\u003e Show results\nCurrent: Scan -\u003e Pre-fill ISBN -\u003e No lookup -\u003e User must click button\n\nRoot Cause: In AddBook.tsx, the barcode:scanned event handler sets state but does not call handleIsbnLookup().","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T12:59:54.804024+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T13:06:00.38652+01:00","closed_at":"2026-01-18T13:06:00.38652+01:00","close_reason":"Closed"}
{"id":"webapp-booky-bhj","title":"Book Lending Tracking","description":"Implement book lending and borrowing tracking feature. Track which books are loaned out and to whom. Add lending history and return reminders. Include borrower management with contact info. Add availability status and waiting list for borrowed books.","status":"open","priority":3,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:15.587243+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:15.587243+01:00"}
{"id":"webapp-booky-bzf","title":"Migrate File Upload Feature to Backend-Lite","description":"## Summary\n\nMigrate essential features from old backend (`backend/`) to backend-lite that are required for frontend functionality but currently missing from backend-lite.\n\n## Key Missing Feature: File Upload\n\nThe old backend has `/files` endpoint for cover image uploads that backend-lite is missing. This is required because the frontend's `fileUploadService.ts` and `CoverUpload` component need to upload book cover images.\n\n## Required Migrations\n\n### 1. File Upload Route (`/files`)\n- Copy or adapt `backend/src/routes/files.ts` to `backend-lite/src/routes/files.ts`\n- Implement POST `/files/cover/:bookId` endpoint\n- Implement DELETE `/files/:fileId` endpoint\n\n### 2. File Storage Service\n- Copy or adapt `backend/src/fileStorage.ts` to `backend-lite/src/lib/fileStorage.ts`\n- Handle local file storage for cover images\n- Support file deletion\n\n### 3. Update Server Entry Point\n- Mount `/files` route in `backend-lite/src/server.ts`\n- Add multer for multipart form handling\n\n### 4. Add Dependencies\n- Add `multer` to `backend-lite/package.json`\n\n## Dependencies\n- This ticket depends on completing the feature audit\n\n## Acceptance Criteria\n- Backend-lite can handle book cover image uploads\n- POST `/files/cover/:bookId` works with authentication\n- DELETE `/files/:fileId` works with authentication\n- Frontend file upload tests pass against backend-lite","status":"closed","priority":1,"issue_type":"task","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T07:07:51.771549+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:18:40.820317+01:00","closed_at":"2026-01-19T07:18:40.820317+01:00","close_reason":"File upload feature implemented in backend-lite"}
{"id":"webapp-booky-cja","title":"Backend: Add Missing Auth Endpoints","description":"Add missing authentication endpoints to main backend required by frontend.\n\n**Required Endpoints:**\n\n1. **POST /auth/logout**\n   - Accepts: `{ refreshToken?: string }`\n   - Returns: `{ success: true }`\n   - Purpose: Clear session, revoke refresh token if provided\n\n2. **Ensure /auth/refresh returns proper format**\n   - Current returns: `{ accessToken }`\n   - Should return: `{ success: true, accessToken, refreshToken?, expiresIn }`\n   - Must include `success: true` field to match frontend expectations\n\n**Acceptance Criteria:**\n- POST /auth/logout returns { success: true }\n- POST /auth/refresh returns { success: true, accessToken, expiresIn }\n- Response formats are consistent (include success field)","status":"closed","priority":1,"issue_type":"bug","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T06:58:30.801709+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:01:03.325278+01:00","closed_at":"2026-01-19T07:01:03.325278+01:00","close_reason":"Completed"}
{"id":"webapp-booky-cmd","title":"Files Involved","description":"- `src/lib/importUtils.ts` - Contains `createRatingFromImport` and `transformImportBook` functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.952808+01:00","updated_at":"2026-01-18T09:04:16.536518+01:00","closed_at":"2026-01-18T09:04:16.536518+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-crq","title":"Problem Statement","description":"Ratings (and their associated reviews) are not being correctly imported when importing books from the booknotes-export format. Users report that their existing ratings and reviews are lost during the import process.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.945054+01:00","updated_at":"2026-01-18T09:04:16.516153+01:00","closed_at":"2026-01-18T09:04:16.516153+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-d1e","title":"CI/CD Pipeline Setup","description":"Implement CI/CD pipeline for automated testing and deployment. Set up GitHub Actions for linting, type checking, unit tests, and E2E tests on every PR. Add automated performance testing with Lighthouse CI. Configure deployment automation for production builds.","status":"open","priority":4,"issue_type":"chore","owner":"wese@nope.at","created_at":"2026-01-19T06:37:19.80207+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:19.80207+01:00"}
{"id":"webapp-booky-dgy","title":"Suggested Fixes","description":"1. **Accept rating = 0**: Treat rating = 0 as valid (represents unrated)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.954281+01:00","updated_at":"2026-01-18T09:04:16.543842+01:00","closed_at":"2026-01-18T09:04:16.543842+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-e0d","title":"Advanced Search and Filtering","description":"Implement advanced search and filtering with full-text search capabilities. Add faceted search by author, genre, rating, year. Implement fuzzy matching for ISBN and title searches. Add saved search queries and search history. Optimize IndexedDB queries for large libraries (1000+ books).","status":"open","priority":3,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:12.201026+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:12.201026+01:00"}
{"id":"webapp-booky-e9z","title":"\"ISBN","description":"\"When","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:17:11.204412+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:05.46697+01:00","closed_at":"2026-01-18T21:44:05.466972+01:00"}
{"id":"webapp-booky-edy","title":"Create rating repair utility for existing imports","description":"## Create rating repair utility for existing imports\\n\\n### Context\\nUsers who already imported from booknotes-export may have lost their ratings. This utility will identify and repair missing ratings.\\n\\n### Features\\n1. Scan database for books that should have ratings (based on original export data)\\n2. Compare imported books with export data\\n3. Backfill missing ratings\\n4. Generate report of repairs made\\n\\n### Technical Approach\\n1. Load original export metadata.json\\n2. Query all imported books\\n3. Match by ID and compare rating values\\n4. Insert missing ratings via ratingOperations.upsert\\n5. Log results for auditing\\n\\n### Usage\\n\\\\\\\\n\\n### Output\\n- Number of books scanned\\n- Number of ratings repaired\\n- Any errors encountered","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-18T11:07:26.350822+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:25:26.872518+01:00","closed_at":"2026-01-18T11:25:26.872518+01:00","close_reason":"Not needed. Ratings were always importing correctly (stored in DB). The issue was display-only. Users just need to view their books - ratings will appear. No repair needed as data was preserved."}
{"id":"webapp-booky-ee3","title":"Suggested Investigation Steps","description":"1. **Check source export format**: Verify what field names are actually used for ratings in the booknotes-export JSON","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:04:10.952339+01:00","updated_at":"2026-01-18T09:04:16.534354+01:00","closed_at":"2026-01-18T09:04:16.534354+01:00","close_reason":"Creating a single consolidated ticket instead"}
{"id":"webapp-booky-gc1","title":"Debug rating import failure","description":"## Debug rating import failure from booknotes-export\\n\\n### Context\\nImport from ~/Downloads/booknotes-export fails to import ratings. Export contains 156 books with valid ratings (1-5 scale), but ratings are not transferred during import.\\n\\n### Root Cause Analysis\\nNeed to identify exact failure point in the import pipeline:\\n1. Data parsing (readImportMetadata)\\n2. Transformation (transformImportBook)  \\n3. Rating extraction (createRatingFromImport)\\n4. Database storage (ratingOperations.upsert)\\n\\n### Investigation Steps\\n1. Add console logging to trace rating values through import pipeline\\n2. Test with actual export data from ~/Downloads/booknotes-export\\n3. Validate getRatingFromImport returns expected values\\n4. Check if transformed.rating is null/undefined after transformation\\n5. Verify ratingOperations.upsert is called and succeeds\\n\\n### Expected Outcome\\nIdentify specific line/condition causing rating loss","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:07:04.504328+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:24:46.194826+01:00","closed_at":"2026-01-18T11:24:46.194826+01:00","close_reason":"Debug completed. Root cause: BookDetail page not loading existing ratings. Fix already applied in commit 56321fd."}
{"id":"webapp-booky-gcg","title":"Expand Test Coverage - Unit Tests","description":"Expand test coverage by adding comprehensive unit tests for core functionality including hooks, utilities, and components. Add tests for useBooks, useSync, useAnalytics, barcodeUtils, and API functions. Target 70% test coverage across critical paths.","status":"in_progress","priority":1,"issue_type":"task","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T06:37:05.00274+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:52:13.863975+01:00"}
{"id":"webapp-booky-h0d","title":"Remove Old Backend and Update Frontend","description":"## Summary\n\nRemove the old backend directory (`backend/`) after confirming backend-lite has all required features. Update frontend configuration to point to backend-lite and update documentation.\n\n## Pre-requisites\n\nComplete ticket webapp-booky-iq3 (Migrate File Upload) before this ticket.\n\n## Tasks\n\n### 1. Verify Backend-Lite is Complete\n- [ ] All frontend API calls work against backend-lite\n- [ ] File upload functionality works\n- [ ] Authentication works (login, register, logout, refresh)\n- [ ] All CRUD operations work (books, collections, ratings, reading, tags)\n\n### 2. Update Frontend Configuration\n- [ ] Verify VITE_BACKEND_API_URL defaults to backend-lite (port 3001)\n- [ ] Update any hardcoded URLs to use environment variables\n- [ ] Update API client code if needed\n\n### 3. Remove Old Backend\n```bash\n# Delete old backend directory\nrm -rf backend/\n\n# Remove from git\ngit rm -rf backend/\n```\n\n### 4. Update Project Documentation\n- [ ] Update README.md - remove references to old backend\n- [ ] Update AGENTS.md - remove backend instructions\n- [ ] Update any docs mentioning `backend/` directory\n- [ ] Update package.json scripts if they reference old backend\n\n### 5. Clean Up Root Directory\n- [ ] Remove any backend-related files in root\n- [ ] Update .gitignore if needed\n\n## Files to Modify/Remove\n\n**Remove:**\n- `backend/` directory entirely\n- `backend/` references in documentation\n\n**Modify:**\n- `README.md` - Update backend references\n- `AGENTS.md` - Update development instructions\n- `package.json` - Remove backend scripts if any\n\n## Acceptance Criteria\n- Old backend directory completely removed\n- Frontend works with backend-lite\n- Documentation updated\n- No broken references to old backend\n- Project builds successfully","status":"closed","priority":2,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T07:08:01.7391+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:08:34.013076+01:00","closed_at":"2026-01-19T07:08:34.013076+01:00","close_reason":"Duplicate - covered by webapp-booky-wv7"}
{"id":"webapp-booky-hyb","title":"\"Add","description":"\"The","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-18T22:42:35.248396+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T22:53:01.499725+01:00","closed_at":"2026-01-18T22:53:01.499725+01:00","close_reason":"Invalid ticket - incomplete/truncated data"}
{"id":"webapp-booky-hz2","title":"Code Quality - Fix Lint Errors","description":"Fix ESLint configuration errors in backend-lite directory. Update tsconfig.json to properly include backend-lite paths or exclude them from linting. Clean up generated .d.ts files that are causing parsing errors. Ensure clean lint results.","status":"closed","priority":2,"issue_type":"bug","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T06:37:07.960672+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:31:58.476383+01:00","closed_at":"2026-01-19T07:31:58.476383+01:00","close_reason":"Lint errors fixed - eslint config updated to exclude backend-lite"}
{"id":"webapp-booky-iq3","title":"Migrate File Upload to Backend-Lite","description":"## Summary\n\nMigrate critical missing features from the old backend to backend-lite. Based on the audit in ticket webapp-booky-v9g, implement the essential features that backend-lite is missing.\n\n## Expected Missing Features (from audit)\n\nBased on initial analysis, backend-lite is missing:\n1. **File Upload for Book Covers** - Old backend has `/files/*` endpoints for uploading cover images\n2. **OAuth/Social Authentication** - Old backend has social.ts with OAuth providers\n\n## Specific Features to Migrate\n\n### 1. File Upload Endpoint (Priority: High)\nAdd to backend-lite:\n- `POST /files/cover/:bookId` - Upload book cover image\n- `DELETE /files/:fileId` - Delete uploaded file\n- `GET /files/:fileId` - Retrieve uploaded file\n\nRequirements:\n- Support image uploads (JPEG, PNG, GIF, WebP)\n- Max file size: 10MB\n- Store in `uploads/` directory (already exists in backend-lite)\n- Use multer for multipart handling\n- Add auth middleware protection\n\n### 2. OAuth Support (Priority: Medium - if needed)\nAdd OAuth providers if required:\n- Google OAuth\n- GitHub OAuth (or defer to future)\n\n## Files to Create/Modify\n\n1. `backend-lite/src/routes/files.ts` - New file upload routes\n2. `backend-lite/package.json` - Add multer dependency if needed\n3. `backend-lite/src/lib/fileStorage.ts` - File handling utilities (new)\n\n## Acceptance Criteria\n- File upload endpoint works with book covers\n- Files are stored in uploads/ directory\n- OAuth endpoints available (if required by frontend)\n- All endpoints authenticated via existing auth middleware\n- Backend-lite builds without errors","status":"closed","priority":1,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T07:07:43.924826+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:08:33.779422+01:00","closed_at":"2026-01-19T07:08:33.779422+01:00","close_reason":"Duplicate - covered by webapp-booky-bzf"}
{"id":"webapp-booky-j7k","title":"Create rating repair utility for existing imports","description":"## Create rating repair utility for existing imports\\n\\n### Context\\nUsers who already imported from booknotes-export may have lost their ratings. This utility will identify and repair missing ratings.\\n\\n### Features\\n1. Scan database for books that should have ratings (based on original export data)\\n2. Compare imported books with export data\\n3. Backfill missing ratings\\n4. Generate report of repairs made\\n\\n### Technical Approach\\n1. Load original export metadata.json\\n2. Query all imported books\\n3. Match by ID and compare rating values\\n4. Insert missing ratings via ratingOperations.upsert\\n5. Log results for auditing\\n\\n### Usage\\n\\n\\n### Output\\n- Number of books scanned\\n- Number of ratings repaired\\n- Any errors encountered","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-01-18T11:07:20.463411+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:07:36.74099+01:00","closed_at":"2026-01-18T11:07:36.74099+01:00","close_reason":"Duplicate ticket, use webapp-booky-edy instead"}
{"id":"webapp-booky-ja0","title":"Performance Optimization - Bundle Size","description":"Optimize production bundle size from ~1.4MB to under 500KB gzipped. Implement tree-shaking improvements, remove unused dependencies, configure better code splitting with Vite, and optimize chunkSizeWarningLimit. Add compression and caching strategies.","status":"open","priority":1,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T06:37:06.190243+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:06.190243+01:00"}
{"id":"webapp-booky-k77","title":"Fix cover image aspect ratio in preview and edit view","description":"The preview and edit view for cover images is displaying at the wrong aspect ratio.\\n\\n## Expected Behavior\\n- Cover images should display at 6:9 (standard book cover ratio)\\n- The preview should match what the final cropped output will look like\\n\\n## Actual Behavior\\n- The preview and edit view does not show the correct 6:9 aspect ratio\\n- This is a regression from commit ea0402c which changed the aspect ratio to 6:9\\n\\n## Steps to Reproduce\\n1. Go to Add Book or Edit Book page\\n2. Upload a cover image\\n3. Observe the preview/crop area - it does not maintain 6:9 aspect ratio correctly\\n\\n## Files Affected\\n- src/components/image/CoverUpload.tsx\\n- src/components/image/ImageCropper.tsx\\n- src/components/camera/CameraCapture.tsx\\n\\n## References\\n- Commit: ea0402c \"Re-design book edit form with 6:9 cover image aspect ratio\"\\n- Issue: webapp-booky-cn6","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-01-18T09:05:28.890711+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:20:57.362453+01:00","closed_at":"2026-01-18T09:20:57.362453+01:00","close_reason":"Closed"}
{"id":"webapp-booky-mfm","title":"\"ISBN","description":"\"##","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-18T13:16:44.952083+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T21:44:04.380917+01:00","closed_at":"2026-01-18T21:44:04.380925+01:00"}
{"id":"webapp-booky-mr8","title":"Fix ratings import bug - ratings not imported correctly","description":"# Ratings Not Imported Correctly During Book Import\n\n## Summary\nRatings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.\n\n## Root Cause Analysis\n\n### Issue 1: Rating = 0 Rejected\nThe createRatingFromImport function in src/lib/importUtils.ts (lines 111-141) returns null when importBook.rating === 0 because 0 \u003c 0.5. If the source data uses 0 for unrated books instead of undefined, ratings are silently dropped.\n\n### Issue 2: Floating Point Precision Issues\nThe check Math.round(importBook.rating * 2) / 2 !== importBook.rating can fail due to floating point precision issues (e.g., 3.0000000001 != 3.0).\n\n### Issue 3: Missing Field Mapping\nCode only looks for the rating field. If source uses myRating, userRating, starRating, etc., they are ignored.\n\n### Issue 4: Rating Scale Mismatch\nIf source uses 1-10 scale, ratings greater than 5 fail validation and are dropped.\n\n## Impact\n- User data loss (ratings and reviews)\n- Loss of trust in import functionality\n- Incomplete migration from other applications\n\n## Files Involved\n- src/lib/importUtils.ts - createRatingFromImport, transformImportBook functions\n- src/lib/importService.ts - importSingleBook, importSingleBookWithCover functions\n- src/types/index.ts - ImportBookData interface definition\n\n## Suggested Fixes\n1. Accept rating = 0 as valid (represents unrated)\n2. Use tolerance-based comparison for 0.5 increment check\n3. Add support for multiple rating field names\n4. Add scale conversion (1-10 to 0.5-5)\n5. Add logging when ratings are skipped and the reason\n6. Add UI feedback for skipped ratings\n\n## Priority\nHigh (P1) - This is a data integrity issue affecting user data during migration.\n","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T09:05:46.22668+01:00","updated_at":"2026-01-18T09:49:17.02021+01:00","closed_at":"2026-01-18T09:49:17.02021+01:00","close_reason":"Closed"}
{"id":"webapp-booky-oo3","title":"Fix ratings import issue - ratings not imported correctly","description":"## Summary\\nRatings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.\\n\\n## Root Cause\\nThe  function in  (lines 111-141) has validation issues:\\n\\n1. **Rating = 0 rejected**: When , the function returns null because 0 \u003c 0.5. If source data uses 0 for unrated books instead of undefined, ratings are silently dropped.\\n\\n2. **Floating point precision**: The check  can fail due to floating point precision issues (e.g., 3.0000000001 != 3.0).\\n\\n3. **Missing field mapping**: Code only looks for  field. If source uses , , , etc., they are ignored.\\n\\n4. **Scale mismatch**: If source uses 1-10 scale, ratings \u003e 5 fail validation and are dropped.\\n\\n## Impact\\n- User data loss (ratings and reviews)\\n- Loss of trust in import functionality\\n- Incomplete migration from other applications\\n\\n## Files Involved\\n-  - , \\n-  - , \\n-  -  interface\\n\\n## Suggested Fixes\\n1. Accept rating = 0 as valid (represents unrated)\\n2. Use tolerance-based comparison for 0.5 increment check\\n3. Add support for multiple rating field names\\n4. Add scale conversion (1-10 to 0.5-5)\\n5. Add logging when ratings are skipped\\n6. Add UI feedback for skipped ratings","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T09:04:26.621764+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T09:05:22.304753+01:00","closed_at":"2026-01-18T09:05:22.304753+01:00","close_reason":"Recreating with better formatting"}
{"id":"webapp-booky-pnq","title":"Impact","description":"- User data loss (ratings and reviews)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.722994+01:00","updated_at":"2026-01-18T09:05:42.968965+01:00","closed_at":"2026-01-18T09:05:42.968965+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-psi","title":"Implement German language priority for ISBN metadata fetching","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-18T11:54:05.059038+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T12:19:04.569277+01:00","closed_at":"2026-01-18T12:19:04.569277+01:00","close_reason":"German language priority for ISBN metadata fetching implemented"}
{"id":"webapp-booky-qwd","title":"\"Add","description":"\"Create","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T22:42:36.787981+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T22:53:10.257881+01:00","closed_at":"2026-01-18T22:53:10.257881+01:00","close_reason":"Invalid ticket - incomplete/truncated data"}
{"id":"webapp-booky-rda","title":"Fix rating import bug","description":"## Fix rating import bug\\n\\n### Context\\nThis ticket depends on webapp-booky-gc1 (Debug rating import failure)\\n\\n### Problem\\nRatings from booknotes-export are not being imported to the application.\\n\\n### Root Cause\\n[TODO: Fill in after webapp-booky-gc1 investigation completes]\\n\\n### Fix Strategy\\n[TODO: Specify fix based on root cause]\\n\\n### Changes Required\\n- [ ] Fix identified issue in importUtils.ts or importService.ts\\n- [ ] Add unit tests for rating import scenarios\\n- [ ] Verify fix with actual export data","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-18T11:07:10.192387+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:24:54.573814+01:00","closed_at":"2026-01-18T11:24:54.573814+01:00","close_reason":"Fix applied in commit 56321fd. BookDetail.tsx now loads existing ratings using useRating hook. Ratings import correctly, they just weren't being displayed."}
{"id":"webapp-booky-rr8","title":"Advanced Import/Export Features","description":"Implement data export/import in multiple formats (CSV, JSON, BibTeX, MARC). Add import from Goodreads CSV export format. Include batch operations for bulk updates. Add validation and error reporting for imports. Support selective export by collection or date range.","status":"open","priority":2,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:10.964591+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:10.964591+01:00"}
{"id":"webapp-booky-svn","title":"Accessibility Enhancements","description":"Improve accessibility with additional WCAG 2.1 AA enhancements. Add more ARIA live regions for dynamic content, improve focus management in complex components, add keyboard shortcuts for power users, enhance screen reader experience for charts and data visualizations. Target accessibility score \u003e 95.","status":"open","priority":3,"issue_type":"task","owner":"wese@nope.at","created_at":"2026-01-19T06:37:14.494863+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:14.494863+01:00"}
{"id":"webapp-booky-u3i","title":"Root Cause Analysis","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.721845+01:00","updated_at":"2026-01-18T09:05:42.967+01:00","closed_at":"2026-01-18T09:05:42.967+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-umv","title":"Summary","description":"Ratings (and their associated reviews) are not being correctly imported when importing books from booknotes-export format. Users report that existing ratings and reviews are lost during import.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.720991+01:00","updated_at":"2026-01-18T09:05:42.964792+01:00","closed_at":"2026-01-18T09:05:42.964792+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-uqp","title":"Add Analytics link to sidebar navigation menu","description":"The Analytics page exists at /analytics and is fully functional, but it cannot be accessed from the sidebar navigation menu.\n\n## Current State\n\n**Desktop Sidebar** (src/components/common/Navigation.tsx:62-66):\n- Has: Home, Library, Settings\n- Missing: Analytics link\n\n**Mobile Menu Overlay** (src/components/common/NavigationComponents.tsx:62-65):\n- Has: Analytics, Settings\n- Missing: Home and Library links\n\n## Expected Behavior\n\nUsers should be able to access the Analytics page from both the desktop sidebar and mobile menu overlay.\n\n## Impact\n\n- Users cannot navigate to Analytics from the sidebar (desktop)\n- Mobile users have incomplete navigation (missing Home and Library)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-19T00:13:10.498645+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T00:26:44.666996+01:00","closed_at":"2026-01-19T00:26:44.666996+01:00","close_reason":"Completed"}
{"id":"webapp-booky-v9g","title":"Audit Backend Features - Compare Old vs Backend-Lite","description":"## Summary\n\nAudit the old backend (`backend/`) to identify features that exist there but are missing from backend-lite (`backend-lite/`). Create a comprehensive feature comparison and determine what needs to be migrated.\n\n## Old Backend Features to Audit\n\n### Core Features\n- [ ] Authentication (login, register, logout, refresh, me)\n- [ ] File upload/storage for book covers\n- [ ] Email service for password reset\n- [ ] OAuth/Social authentication\n\n### Routes\n- [ ] `/auth/*` - Authentication endpoints\n- [ ] `/files/*` - File upload/storage endpoints\n\n### Infrastructure\n- [ ] Database models (Prisma schema)\n- [ ] Auth middleware\n- [ ] Security middleware\n- [ ] Logging\n- [ ] Metrics/onitoring\n- [ ] Caching layer\n\n### Deployment\n- [ ] Docker configuration\n- [ ] Kubernetes configs\n- [ ] Nginx configuration\n- [ ] Monitoring (Prometheus/Grafana)\n- [ ] Docker Compose files\n\n## Backend-Lite Current Features\n\n### Routes (Already Have)\n- `/auth/*` - Authentication (just updated)\n- `/books/*` - Book CRUD operations\n- `/collections/*` - Collection management\n- `/ratings/*` - Rating operations\n- `/reading/*` - Reading history\n- `/tags/*` - Tag management\n\n### Missing Features to Identify\nList features from old backend that need migration to backend-lite\n\n## Acceptance Criteria\n- Complete feature matrix comparing both backends\n- List of features to migrate identified\n- Priority assigned to each missing feature\n- Decision made on which features to keep vs remove","status":"closed","priority":1,"issue_type":"task","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T07:07:30.535273+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:15:44.622886+01:00","closed_at":"2026-01-19T07:15:44.622886+01:00","close_reason":"Audit complete - findings documented below"}
{"id":"webapp-booky-vt2","title":"Priority","description":"High (P1) - This is a data integrity issue affecting user data during migration.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.726302+01:00","updated_at":"2026-01-18T09:05:42.973961+01:00","closed_at":"2026-01-18T09:05:42.973961+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-wfw","title":"Files Involved","description":"- src/lib/importUtils.ts - createRatingFromImport, transformImportBook functions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T09:05:37.723916+01:00","updated_at":"2026-01-18T09:05:42.970661+01:00","closed_at":"2026-01-18T09:05:42.970661+01:00","close_reason":"Creating single consolidated ticket"}
{"id":"webapp-booky-wv7","title":"Remove Old Backend Directory","description":"## Summary\n\nAfter features have been migrated to backend-lite, remove the old `backend/` directory from the project. This simplifies the codebase and focuses on the lite backend.\n\n## Preconditions\n\nBefore this ticket can be completed:\n- [ ] All required features from old backend have been migrated to backend-lite (webapp-booky-bzf)\n- [ ] Frontend is tested and working with backend-lite\n- [ ] Tests pass against backend-lite\n\n## Tasks\n\n### 1. Verify Feature Parity\nConfirm backend-lite has all features needed by frontend:\n- [ ] Auth endpoints (login, register, logout, refresh, me)\n- [ ] Book CRUD operations\n- [ ] Collection operations\n- [ ] Rating operations\n- [ ] Reading history\n- [ ] Tag operations\n- [ ] File upload for covers\n\n### 2. Update Frontend Configuration\n- [ ] Update default VITE_BACKEND_API_URL to point to backend-lite (port 3002 or similar)\n- [ ] Update any hardcoded backend URLs in frontend\n\n### 3. Remove Old Backend\n```bash\n# Delete the backend directory\nrm -rf backend/\n```\n\n### 4. Update Repository Configuration\n- [ ] Update .gitignore to remove backend/ references\n- [ ] Update README.md to reflect single backend\n- [ ] Update any documentation referencing old backend\n\n### 5. Update Package.json Scripts\n- [ ] Remove scripts related to old backend\n- [ ] Add/update scripts for backend-lite\n\n## Acceptance Criteria\n- Old `backend/` directory is completely removed\n- Frontend works correctly with backend-lite\n- Documentation updated to reflect single backend\n- No references to old backend remain in project files","status":"closed","priority":1,"issue_type":"task","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T07:08:07.743031+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:19:50.122873+01:00","closed_at":"2026-01-19T07:19:50.122873+01:00","close_reason":"Old backend removed - migration complete"}
{"id":"webapp-booky-x3s","title":"Internationalization (i18n) Support","description":"Add internationalization (i18n) support. Implement translation system with language files. Add support for English, Spanish, German, French as initial languages. Include date/number formatting per locale. Add language selector in settings. Ensure all UI text is externalized.","status":"open","priority":4,"issue_type":"feature","owner":"wese@nope.at","created_at":"2026-01-19T06:37:19.087675+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T06:37:19.087675+01:00"}
{"id":"webapp-booky-xka","title":"Fix Authentication - Missing AuthProvider \u0026 Login Flow","description":"Fix critical authentication issues preventing user login. The app has multiple authentication implementations that conflict and the AuthProvider is not wrapped around the application.\n\n**Issues Found:**\n1. **Missing AuthProvider**: main.tsx doesn't wrap App with AuthProvider - useAuth() throws error\n2. **Duplicate Auth Implementations**: Two conflicting auth implementations (AuthContext vs useAuth hook)\n3. **Response Format Mismatch**: Frontend expects `{success, user, tokens}` but backend-lite returns `{user, token}`\n4. **Missing Logout Endpoint**: Backend missing `/auth/logout` that frontend calls\n\n**Required Fixes:**\n1. Wrap App with AuthProvider in main.tsx using single implementation from contexts/AuthContext.tsx\n2. Remove duplicate useAuth hook from src/hooks/useAuth.tsx or merge implementations\n3. Add `/auth/logout` endpoint to backend/src/routes/auth.ts\n4. Ensure backend response format matches frontend expectations (success field, refresh token)\n5. Add `/auth/signin` route to App.tsx routes\n6. Remove unused useAuth hook file or convert it to re-export from context\n\n**Acceptance Criteria:**\n- User can navigate to /auth/signin and see login form\n- Login with valid credentials succeeds and stores tokens\n- Logout clears tokens and returns to unauthenticated state\n- Token refresh works automatically on token expiration","status":"in_progress","priority":1,"issue_type":"bug","assignee":"René Weselowski","owner":"wese@nope.at","created_at":"2026-01-19T06:56:14.85998+01:00","created_by":"René Weselowski","updated_at":"2026-01-19T07:06:40.223046+01:00","dependencies":[{"issue_id":"webapp-booky-xka","depends_on_id":"webapp-booky-cja","type":"blocks","created_at":"2026-01-19T06:58:49.537727+01:00","created_by":"René Weselowski"},{"issue_id":"webapp-booky-xka","depends_on_id":"webapp-booky-4co","type":"blocks","created_at":"2026-01-19T06:58:49.900734+01:00","created_by":"René Weselowski"}]}
{"id":"webapp-booky-yf2","title":"Move star rating to bottom-left corner on library book cards","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-18T11:51:34.662074+01:00","created_by":"René Weselowski","updated_at":"2026-01-18T11:54:39.98086+01:00","closed_at":"2026-01-18T11:54:39.98086+01:00","close_reason":"Closed"}
